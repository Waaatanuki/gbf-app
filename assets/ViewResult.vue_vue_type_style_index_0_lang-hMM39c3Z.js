import{d as q,c7 as B,f as F,an as L,o as t,n as z,w as l,F as g,bQ as V,e as b,a as r,c as n,g as y,b as a,t as w,p as k,c8 as T,V as I,W as J,a2 as M,E as O}from"./index-alEoQSOO.js";import{E as W,a as D}from"./el-table-column-H9skk0jm.js";import"./el-checkbox-Li_iZ2-c.js";import"./el-tooltip-w40geAFS.js";import{E as Q}from"./el-popper-V-aur2Tq.js";/* empty css               */const R={fc:""},A={key:0,class:"absolute h-full w-full fc bg-black/40"},G=["src"],H=["src"],K={"w-55":"",fc:"","flex-wrap":"","gap-2":""},P=["src"],U={"w-55":"",fc:"","flex-wrap":"","gap-2":""},X=["src"],Y={class:"waterfall"},Z={class:"relative fc flex-col select-none"},ee={key:0,class:"absolute h-full w-full bg-black/40"},te=["src"],se={class:"fc"},ae={key:0,class:"absolute z-10 h-full w-full bg-black/80"},ne=["onClick"],le={key:0,class:"absolute h-full w-full fc bg-black/40"},oe={class:"fc flex-col select-none"},ce=["src"],me=q({__name:"ViewResult",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(x){const E=B(x,"modelValue"),S=F(()=>{const e=[];return E.value.forEach(_=>{var i;if((i=_.at(-1))!=null&&i.total){const d=_.at(-1).total;d==null||d.forEach(o=>{const f=e.find(m=>m.item_id===o.item_id);f?f.number+=o.number:e.push(JSON.parse(JSON.stringify(o)))})}}),e}),{height:j}=L();function N(e,_,i,d){if(i.kind!=="54"&&(i.done=!i.done),!_.article.find(o=>!o.done)){_.done=!0,d<e.length-1&&e.splice(d,1);let o=d;for(;o<e.length;){const f=e[o].article.find(m=>m.item_id===_.seq_id&&m.number===_.number);if(f){f.done=!0;break}o++}}}function p(e){if(!e)return"https://prd-game-a1-granbluefantasy.akamaized.net/assets/img/sp/job/bullet/empty.png";if(e.article)return`https://prd-game-a-granbluefantasy.akamaized.net/assets/img/sp/assets/bullet/s/${e.seq_id}.jpg`;if(e.kind==="10")return`https://prd-game-a-granbluefantasy.akamaized.net/assets/img/sp/assets/item/article/s/${e.item_id}.jpg`;if(e.kind==="17")return`https://prd-game-a-granbluefantasy.akamaized.net/assets/img/sp/assets/item/evolution/s/${e.item_id}.jpg`;if(e.kind==="54")return`https://prd-game-a-granbluefantasy.akamaized.net/assets/img/sp/assets/bullet/s/${e.item_id}.jpg`}return(e,_)=>{const i=J,d=Q,o=W,f=D,m=M,$=O;return t(),z($,null,{header:l(()=>[a("div",R,[(t(!0),n(g,null,k(E.value,(s,h)=>{var c;return t(),n("div",{key:h,relative:"",fc:""},[s.at(-1)&&((c=s.at(-1))!=null&&c.done)?(t(),n("div",A,[r(i,{size:45,color:"#409EFC"},{default:l(()=>[r(b(V))]),_:1})])):y("",!0),s.length===0?(t(),n("img",{key:1,class:"m-2 h-14 w-14",src:p(s.at(-1))},null,8,G)):(t(),z(d,{key:2,effect:"dark",placement:"bottom"},{content:l(()=>{var v;return[a("div",K,[(t(!0),n(g,null,k((v=s.at(-1))==null?void 0:v.total,(u,C)=>(t(),n("div",{key:C,fc:"","flex-col":"","select-none":""},[a("img",{"h-12":"","w-12":"",src:p(u)},null,8,P),a("span",null,w(u.number),1)]))),128))])]}),default:l(()=>[a("img",{class:"m-2 h-14 w-14",src:p(s.at(-1))},null,8,H)]),_:2},1024))])}),128)),r(d,{effect:"dark",placement:"bottom"},{content:l(()=>[a("div",U,[(t(!0),n(g,null,k(b(S),(s,h)=>(t(),n("div",{key:h,fc:"","flex-col":"","select-none":""},[a("img",{"h-12":"","w-12":"",src:p(s)},null,8,X),a("span",null,w(s.number),1)]))),128))])]),default:l(()=>[r(i,{"ml-2":"","mt-9":""},{default:l(()=>[r(b(T))]),_:1})]),_:1})])]),default:l(()=>[r(m,{height:b(j)-315},{default:l(()=>[a("div",Y,[(t(!0),n(g,null,k(E.value.filter(s=>s.length!==0&&s[s.length-1].done!==!0),(s,h)=>(t(),n("div",{key:h,class:"water m-auto p-2"},[r(f,{data:s},{default:l(()=>[r(o,{prop:"seq_id",label:"目标",width:"80",align:"center"},{default:l(({row:c})=>[a("div",Z,[c.done?(t(),n("div",ee)):y("",!0),a("img",{class:"m-1 h-12 w-12",src:p(c)},null,8,te),a("span",null,w(c.number?c.number:"1"),1)])]),_:1}),r(o,{prop:"article",label:"材料",width:"260",align:"center"},{default:l(({row:c,$index:v})=>[a("div",se,[c.article.find(u=>u.kind==="54"&&u.done!==!0)?(t(),n("div",ae)):y("",!0),(t(!0),n(g,null,k(c.article,(u,C)=>(t(),n("div",{key:C,class:"relative cursor-pointer",onClick:I(re=>N(s,c,u,v),["prevent"])},[u.done?(t(),n("div",le,[r(i,{size:45,color:"#409EFC"},{default:l(()=>[r(b(V))]),_:1})])):y("",!0),a("div",oe,[a("img",{class:"m-1 h-12 w-12",src:p(u)},null,8,ce),a("span",null,w(u.number),1)])],8,ne))),128))])]),_:2},1024)]),_:2},1032,["data"])]))),128))])]),_:1},8,["height"])]),_:1})}}});export{me as _};
