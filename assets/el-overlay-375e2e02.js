import{F as j,u as D,aV as G,w as x,aW as q,aX as h,b as k,d as B,e as K,v as X,G as M,a2 as J,i as Q,aA as R,r as v,aY as ee,f as S,z as oe,o as te,B as ne,aZ as le}from"./index-e1e4d07d.js";import{P as w}from"./vnode-1be7d77b.js";import{i as se}from"./icon-4d217982.js";import{U as F}from"./event-9519ab40.js";import{u as P}from"./constants-4db3609e.js";import{t as ae,f as A,j as T,w as ue,h as ce,r as ie,a as de,A as I}from"./base-d162ef96.js";import{g as re}from"./scroll-49bb2d6e.js";const fe=(e,o={})=>{j(e)||ae("[useLockscreen]","You need to pass a ref param to this function");const u=o.ns||D("popup"),t=G(()=>u.bm("parent","hidden"));if(!A||T(document.body,t.value))return;let c=0,a=!1,n="0";const d=()=>{setTimeout(()=>{ie(document==null?void 0:document.body,t.value),a&&document&&(document.body.style.width=n)},200)};x(e,s=>{if(!s){d();return}a=!T(document.body,t.value),a&&(n=document.body.style.width),c=re(u.namespace.value);const f=document.documentElement.clientHeight<document.body.scrollHeight,r=ue(document.body,"overflowY");c>0&&(f||r==="scroll")&&a&&(document.body.style.width=`calc(100% - ${c}px)`),ce(document.body,t.value)}),q(()=>d())},me=e=>{if(!e)return{onClick:h,onMousedown:h,onMouseup:h};let o=!1,u=!1;return{onClick:n=>{o&&u&&e(n),o=u=!1},onMousedown:n=>{o=n.target===n.currentTarget},onMouseup:n=>{u=n.target===n.currentTarget}}},ye=k({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:B([String,Array,Object])},zIndex:{type:B([String,Number])}}),ve={click:e=>e instanceof MouseEvent},pe="overlay";var Ce=K({name:"ElOverlay",props:ye,emits:ve,setup(e,{slots:o,emit:u}){const t=D(pe),c=s=>{u("click",s)},{onClick:a,onMousedown:n,onMouseup:d}=me(e.customMaskEvent?void 0:c);return()=>e.mask?X("div",{class:[t.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:n,onMouseup:d},[M(o,"default")],w.STYLE|w.CLASS|w.PROPS,["onClick","onMouseup","onMousedown"]):J("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[M(o,"default")])}});const Ee=Ce,be=k({center:Boolean,alignCenter:Boolean,closeIcon:{type:se},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Me={close:()=>!0},Se=k({...be,appendToBody:Boolean,beforeClose:{type:B(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Pe={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[F]:e=>Q(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Te=(e,o)=>{const t=ne().emit,{nextZIndex:c}=R();let a="";const n=P(),d=P(),s=v(!1),f=v(!1),r=v(!1),p=v(e.zIndex||c());let m,y;const z=ee("namespace",le),N=S(()=>{const l={},i=`--${z.value}-dialog`;return e.fullscreen||(e.top&&(l[`${i}-margin-top`]=e.top),e.width&&(l[`${i}-width`]=de(e.width))),l}),L=S(()=>e.alignCenter?{display:"flex"}:{});function V(){t("opened")}function Y(){t("closed"),t(F,!1),e.destroyOnClose&&(r.value=!1)}function $(){t("close")}function O(){y==null||y(),m==null||m(),e.openDelay&&e.openDelay>0?{stop:m}=I(()=>E(),e.openDelay):E()}function C(){m==null||m(),y==null||y(),e.closeDelay&&e.closeDelay>0?{stop:y}=I(()=>g(),e.closeDelay):g()}function b(){function l(i){i||(f.value=!0,s.value=!1)}e.beforeClose?e.beforeClose(l):C()}function H(){e.closeOnClickModal&&b()}function E(){A&&(s.value=!0)}function g(){s.value=!1}function W(){t("openAutoFocus")}function U(){t("closeAutoFocus")}function Z(l){var i;((i=l.detail)==null?void 0:i.focusReason)==="pointer"&&l.preventDefault()}e.lockScroll&&fe(s);function _(){e.closeOnPressEscape&&b()}return x(()=>e.modelValue,l=>{l?(f.value=!1,O(),r.value=!0,p.value=e.zIndex?p.value++:c(),oe(()=>{t("open"),o.value&&(o.value.scrollTop=0)})):s.value&&C()}),x(()=>e.fullscreen,l=>{o.value&&(l?(a=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=a)}),te(()=>{e.modelValue&&(s.value=!0,r.value=!0,O())}),{afterEnter:V,afterLeave:Y,beforeLeave:$,handleClose:b,onModalClick:H,close:C,doClose:g,onOpenAutoFocus:W,onCloseAutoFocus:U,onCloseRequested:_,onFocusoutPrevented:Z,titleId:n,bodyId:d,closed:f,style:N,overlayDialogStyle:L,rendered:r,visible:s,zIndex:p}};export{Ee as E,Pe as a,be as b,Me as c,Se as d,me as e,Te as u};
