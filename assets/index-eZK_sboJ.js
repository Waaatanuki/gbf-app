import{G as O,H as Q,d as D,M as X,f as w,o as u,c as m,U as N,e,Y as ee,g as T,v as te,_ as oe,am as ae,an as se,i as ne,j as le,l as ie,bJ as re,a1 as de,b as n,n as ce,w as c,t as v,a as l,h as ue,F as M,p as C,E as me,a2 as pe,bY as fe,bZ as _e}from"./index-a9YaoScE.js";import{E as ge}from"./el-button-lQxPGkYP.js";import{E as he,a as be}from"./el-form-item-LdXGiL8N.js";import{E as ve}from"./el-input-T8fBqntC.js";import{d as E}from"./file-y1DC4Gf7.js";import xe from"./GachaAnimation-CBoPlnrP.js";import{_ as ye}from"./_plugin-vue_export-helper-x3n3nnut.js";import"./index-AaB-1rq2.js";import"./use-form-item-kJaQdjHg.js";import"./constants-fvUIFCzx.js";import"./castArray-LS-H15f9.js";import"./_baseClone-jADDRAxm.js";import"./_Uint8Array-rlvvPKB4.js";import"./_initCloneObject-4nuR5uGg.js";import"./typescript-WBLZcIum.js";import"./event-vOXeFsAk.js";const Ve=O({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:Q(String),default:"solid"}}),ke=D({name:"ElDivider"}),we=D({...ke,props:Ve,setup(x){const $=x,f=X("divider"),I=w(()=>f.cssVar({"border-style":$.borderStyle}));return(h,G)=>(u(),m("div",{class:N([e(f).b(),e(f).m(h.direction)]),style:te(e(I)),role:"separator"},[h.$slots.default&&h.direction!=="vertical"?(u(),m("div",{key:0,class:N([e(f).e("text"),e(f).is(h.contentPosition)])},[ee(h.$slots,"default")],2)):T("v-if",!0)],6))}});var Ie=oe(we,[["__file","divider.vue"]]);const Se=ae(Ie),Me="/gbf-app/images/gacha/text_legend10.png",Ce="/gbf-app/images/gacha/text_legend300.png",j=x=>(fe("data-v-52c8915d"),x=x(),_e(),x),Ee={class:"flex flex-wrap items-start justify-center"},$e={relative:""},Re={class:"text-center font-bold"},Ne={class:"text-center"},De={key:1,class:"bg-white dark:bg-#1d1e1f",relative:"","m-2":"","w-250px":"",style:{"box-shadow":"0px 0px 12px rgba(0, 0, 0, 0.12)"}},Ge={"p-2":"","text-center":"","font-bold":""},Ue={class:"h-full flex items-center justify-between"},Fe={class:"gachaText"},Le={class:"relative"},ze={class:"gacha-bg min-h-[139px] fc flex-col p-[2px]"},Be={class:"flex"},Pe=["src"],Te={class:"flex"},je=["src"],Ae={class:"flex"},We=["src"],Ye={fc:""},He=j(()=>n("img",{src:Me,alt:"text_legend10"},null,-1)),Je=[He],Ze=j(()=>n("img",{src:Ce,alt:"text_legend300"},null,-1)),qe=[Ze],Ke={class:"flex flex-wrap justify-center"},Oe=["src"],Qe={class:"text-right text-xs"},Xe=D({__name:"index",setup(x){const{width:$}=se(),f=ne(),I=w(()=>{var o;return(o=f.value)==null?void 0:o.list}),h=w(()=>{var o;return(o=f.value)==null?void 0:o.ratio1}),G=w(()=>{var o;return(o=f.value)==null?void 0:o.ratio2}),A=w(()=>{var o,t;return`*当前卡池时间：${(o=I.value)==null?void 0:o.legend.lineup[0].service_start}—${(t=I.value)==null?void 0:t.legend.lineup[0].service_end}`}),s=le({formData:{legendticket10:0,legendticket:0,stone:0,drawn:0,mobacoin:0,price:160,point:3e3},formVisible:!($.value<800),totalStone:0,count:0,ssrCount:0,cardN:[],cardSR:[],result:[],ssrList:[],animationVisible:!1,animationResult:[]}),{formData:i,formVisible:V,totalStone:k,count:U,ssrCount:F,result:S,ssrList:W,animationVisible:Y,animationResult:R}=ie(s);re(()=>{s.totalStone=s.formData.legendticket10*3e3+s.formData.legendticket*300+s.formData.stone+s.formData.drawn*300+s.formData.mobacoin});const H=["weapon","weapon","summon"],J=["","","r","sr","ssr"];function L(o){const t=o.appear,r=[];return t.forEach(d=>{const g=H[d.category],y=J[d.rarity];d.item.forEach(_=>{r.push({id:_.reward_id,rate:Number.parseFloat(_.drop_rate)/100,cat:g,type:y,incidence:_.incidence})})}),r}function z(o){const t=o?s.cardSR:s.cardN,r=t.length;let d=0;const g=Math.floor(Math.random()*r),y=Math.random();for(let p=g;p<r;p++)if(d+=t[p].rate,d>y)return t[p];for(let p=0;p<g;p++)if(d+=t[p].rate,d>y)return t[p];let _=g;return g===0&&(_=r-1),t[_]}function Z(){const o=[];for(let t=0;t<10;t++)t===9?o.push(z("sr")):o.push(z());return o}function B(o){s.animationVisible=!0,s.animationResult.length=0,s.cardN.length===0&&(s.cardN=L(h.value)),s.cardSR.length===0&&(s.cardSR=L(G.value));for(let t=0;t<o;t++){s.result=Z(),R.value=R.value.concat([...S.value]),s.count+=10;for(const r of s.result)r.type==="ssr"&&(s.ssrCount++,s.ssrList.push(r))}}function q(){s.result=[],s.ssrList=[],s.count=0,s.ssrCount=0}function P(){s.animationVisible=!1,s.animationResult.length=0}return de(()=>{fetch("https://raw.githubusercontent.com/Waaatanuki/asset/main/gbf/gacha/gbf_gacha_info.json").then(o=>o.json()).then(o=>{f.value=o})}),(o,t)=>{const r=ve,d=he,g=Se,y=be,_=me,p=ge,K=pe;return u(),m("div",null,[n("div",Ee,[e(V)?(u(),ce(_,{key:0,class:"m-2 h-[500px] w-[250px]"},{header:c(()=>[n("div",$e,[n("p",Re,v(`${Math.floor(e(k)/9e4)}井${Math.floor(e(k)%9e4/300)}抽`),1),n("div",{"i-carbon:checkbox-indeterminate":"",absolute:"","bottom-0":"","right-2":"","top-0":"","m-auto":"","cursor-pointer":"",onClick:t[0]||(t[0]=a=>V.value=!e(V))})])]),default:c(()=>[l(y,{model:e(i),"label-width":"70px"},{default:c(()=>[l(d,{label:"10连券"},{default:c(()=>[l(r,{modelValue:e(i).legendticket10,"onUpdate:modelValue":t[1]||(t[1]=a=>e(i).legendticket10=a),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),l(d,{label:"单抽券"},{default:c(()=>[l(r,{modelValue:e(i).legendticket,"onUpdate:modelValue":t[2]||(t[2]=a=>e(i).legendticket=a),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),l(d,{label:"宝晶石"},{default:c(()=>[l(r,{modelValue:e(i).stone,"onUpdate:modelValue":t[3]||(t[3]=a=>e(i).stone=a),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),l(d,{label:"已抽"},{default:c(()=>[l(r,{modelValue:e(i).drawn,"onUpdate:modelValue":t[4]||(t[4]=a=>e(i).drawn=a),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),l(d,{label:"剩余点数"},{default:c(()=>[l(r,{modelValue:e(i).mobacoin,"onUpdate:modelValue":t[5]||(t[5]=a=>e(i).mobacoin=a),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),l(g),l(d,{label:"点数价格"},{default:c(()=>[l(r,{modelValue:e(i).price,"onUpdate:modelValue":t[6]||(t[6]=a=>e(i).price=a),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),l(d,{label:"对应点数"},{default:c(()=>[l(r,{modelValue:e(i).point,"onUpdate:modelValue":t[7]||(t[7]=a=>e(i).point=a),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),n("p",Ne,v(`下一井需要补${Math.floor(e(i).price*(9e4-e(k)%9e4)/e(i).point)}元`),1)]),_:1})):(u(),m("div",De,[n("p",Ge,v(`${Math.floor(e(k)/9e4)}井${Math.floor(e(k)%9e4/300)}抽`),1),n("div",{"i-carbon:checkbox-checked":"",absolute:"","bottom-0":"","right-2":"","top-0":"","m-auto":"","cursor-pointer":"",onClick:t[8]||(t[8]=a=>V.value=!e(V))})])),l(_,{class:"m-2 h-[500px] w-[500px]","body-style":"padding:5px"},{header:c(()=>[n("div",Ue,[n("p",Fe," 当前总抽数："+v(e(U))+" , SSR个数："+v(e(F))+" , SSR率："+v((e(F)/e(U)*100).toFixed(2))+"% ",1),l(p,{type:"warning",onClick:q},{default:c(()=>[ue(" 重置 ")]),_:1})])]),default:c(()=>[n("div",Le,[n("div",ze,[n("div",Be,[(u(!0),m(M,null,C(e(S).slice(0,3),(a,b)=>(u(),m("img",{key:b,class:"m-[3px]",src:("getGachaItemImg"in o?o.getGachaItemImg:e(E))(a.cat,a.id)},null,8,Pe))),128))]),n("div",Te,[(u(!0),m(M,null,C(e(S).slice(3,7),(a,b)=>(u(),m("img",{key:b,class:"m-[3px]",src:("getGachaItemImg"in o?o.getGachaItemImg:e(E))(a.cat,a.id)},null,8,je))),128))]),n("div",Ae,[(u(!0),m(M,null,C(e(S).slice(7,10),(a,b)=>(u(),m("img",{key:b,class:"m-[3px]",src:("getGachaItemImg"in o?o.getGachaItemImg:e(E))(a.cat,a.id)},null,8,We))),128))])]),n("div",Ye,[n("div",{class:"btn-gacha fc",onClick:t[9]||(t[9]=a=>B(1))},Je),n("div",{class:"btn-gacha fc",onClick:t[10]||(t[10]=a=>B(30))},qe)]),l(K,{height:"195px"},{default:c(()=>[n("div",Ke,[(u(!0),m(M,null,C(e(W),(a,b)=>(u(),m("img",{key:b,class:N(["m-[4px] h-10",{target:a.incidence==="1"}]),src:("getGachaItemImg"in o?o.getGachaItemImg:e(E))(a.cat,a.id)},null,10,Oe))),128))])]),_:1}),n("p",Qe,v(e(A)),1)])]),_:1})]),e(Y)?(u(),m("div",{key:0,class:"animation",onClick:P},[l(xe,{"result-list":e(R),onClose:P},null,8,["result-list"])])):T("",!0)])}}}),gt=ye(Xe,[["__scopeId","data-v-52c8915d"]]);export{gt as default};
