import"./base-d162ef96.js";import{E as I}from"./el-dialog-064e4ef9.js";import"./el-overlay-375e2e02.js";import{E as L}from"./el-button-a3f7639e.js";import{a as R,E as z}from"./el-table-column-c6742379.js";import"./el-checkbox-7957f217.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-4c0fcaf7.js";import"./el-scrollbar-528d0670.js";import{E as $}from"./el-input-4552dc9d.js";import"./el-tag-51a09018.js";import{e as j,Y as T,Z as B,o as P,g as r,h as i,v as l,p as s,k as c,X as k,j as m,T as _,W as f,D as x,a9 as y}from"./index-e1e4d07d.js";import{l as M}from"./lodash-f3bfa25a.js";import{b as F,m as H}from"./evoker-3bbab089.js";import{d as W}from"./file-fcde9183.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";import"./icon-4d217982.js";import"./focus-trap-9c06f385.js";import"./aria-60e0cdc6.js";import"./constants-4db3609e.js";import"./refs-3f2ae67d.js";import"./index-927a9af8.js";import"./vnode-1be7d77b.js";import"./event-9519ab40.js";import"./scroll-49bb2d6e.js";import"./use-form-item-77ae3ce7.js";import"./index-f8748455.js";import"./_Uint8Array-6184b0e9.js";import"./_initCloneObject-b176e66b.js";import"./flatten-e9b73458.js";import"./isEqual-9aa6cdf6.js";import"./index-5725fa7a.js";import"./typescript-defaf979.js";const Y={class:"app-container"},Z={flex:""},q={"w-300px":""},A=["src","onClick"],G=["src","onClick"],K=["onUpdate:modelValue"],Q={flex:""},ee={class:"item"},te=["src","onClick"],ae=["onUpdate:modelValue"],oe=j({__name:"index",setup(ne){const V=document.documentElement.offsetHeight-80,o=T({needItemList:[],tableData:[],dialog:{title:"",visible:!1},currentCell:[],targetRow:{},targetProp:""}),{tableData:C,dialog:u,needItemList:b,currentCell:w}=B(o);function E(a,e){u.value.visible=!0,o.targetRow=a,o.targetProp=e.property,o.currentCell=JSON.parse(a[e.property]),o.needItemList=[]}function h(a){o.needItemList.some(e=>e.id===a)||o.needItemList.push({id:a,count:0})}function N(){const a={};o.needItemList.forEach(e=>{a[e.id]=e.count}),o.currentCell.push(a),o.targetRow[o.targetProp]=JSON.stringify(o.currentCell,null,2),u.value.visible=!1}function D(){const a=M.cloneDeep(o.tableData);a.forEach(e=>{e.tarotUncap=JSON.parse(e.tarotUncapStr),e.evokerUncap=JSON.parse(e.evokerUncapStr),e.weaponUncap=JSON.parse(e.weaponUncapStr),e.domainUncap=JSON.parse(e.domainUncapStr),delete e.tarotUncapStr,delete e.evokerUncapStr,delete e.weaponUncapStr,delete e.domainUncapStr}),W(JSON.stringify(a,null,2),"uncapData")}return P(()=>{o.tableData=F,o.tableData.forEach(a=>{a.tarotUncapStr=JSON.stringify(a.tarotUncap,null,2),a.evokerUncapStr=JSON.stringify(a.evokerUncap,null,2),a.weaponUncapStr=JSON.stringify(a.weaponUncap,null,2),a.domainUncapStr=JSON.stringify(a.domainUncap,null,2)})}),(a,e)=>{const d=z,U=$,O=R,g=L,J=I;return r(),i("div",Y,[l(O,{data:c(C),"max-height":V,onCellDblclick:E},{default:s(()=>[l(d,{prop:"name",label:"阶段",align:"center",width:"100"}),l(d,{prop:"tarotUncapStr",label:"塔罗牌突破",align:"center"},{default:s(({row:t})=>[l(U,{modelValue:t.tarotUncapStr,"onUpdate:modelValue":n=>t.tarotUncapStr=n,type:"textarea",autosize:{maxRows:10}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(d,{prop:"evokerUncapStr",label:"贤者突破",align:"center"},{default:s(({row:t})=>[l(U,{modelValue:t.evokerUncapStr,"onUpdate:modelValue":n=>t.evokerUncapStr=n,type:"textarea",autosize:{maxRows:10}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(d,{prop:"weaponUncapStr",label:"武器突破",align:"center"},{default:s(({row:t})=>[l(U,{modelValue:t.weaponUncapStr,"onUpdate:modelValue":n=>t.weaponUncapStr=n,type:"textarea",autosize:{maxRows:10}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(d,{prop:"domainUncapStr",label:"领域突破",align:"center"},{default:s(({row:t})=>[l(U,{modelValue:t.domainUncapStr,"onUpdate:modelValue":n=>t.domainUncapStr=n,type:"textarea",autosize:{maxRows:10}},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"]),l(g,{class:"export-btn",type:"primary",onClick:D},{default:s(()=>[k(" 导出 ")]),_:1}),l(J,{modelValue:c(u).visible,"onUpdate:modelValue":e[1]||(e[1]=t=>c(u).visible=t),title:c(u).title,width:"800px",top:"5vh"},{footer:s(()=>[l(g,{type:"primary",onClick:N},{default:s(()=>[k(" 确认 ")]),_:1}),l(g,{onClick:e[0]||(e[0]=t=>c(u).visible=!1)},{default:s(()=>[k(" 取消 ")]),_:1})]),default:s(()=>[m("div",Z,[m("div",q,[(r(!0),i(_,null,f(c(H),(t,n)=>(r(),i("div",{key:n,flex:""},[(r(!0),i(_,null,f(t,(p,v)=>(r(),i("div",{key:v,class:"item"},[m("img",{src:`https://prd-game-a-granbluefantasy.akamaized.net/assets/img/sp/assets/item/article/s/${p}.jpg`,onClick:S=>h(p)},null,8,A)]))),128))]))),128))]),m("div",null,[(r(!0),i(_,null,f(c(w),(t,n)=>(r(),i("div",{key:n,flex:""},[(r(!0),i(_,null,f(Object.keys(t),(p,v)=>(r(),i("div",{key:v,class:"item"},[m("img",{src:`https://prd-game-a-granbluefantasy.akamaized.net/assets/img/sp/assets/item/article/s/${p}.jpg`,onClick:S=>h(p)},null,8,G),x(m("input",{"onUpdate:modelValue":S=>t[p]=S,"w-40px":""},null,8,K),[[y,t[p],void 0,{number:!0}]])]))),128))]))),128)),m("div",Q,[(r(!0),i(_,null,f(c(b),(t,n)=>(r(),i("div",{key:n},[m("div",ee,[m("img",{src:`https://prd-game-a-granbluefantasy.akamaized.net/assets/img/sp/assets/item/article/s/${t.id}.jpg`,onClick:p=>c(b).splice(n,1)},null,8,te),x(m("input",{"onUpdate:modelValue":p=>t.count=p,"w-40px":""},null,8,ae),[[y,t.count,void 0,{number:!0}]])])]))),128))])])])]),_:1},8,["modelValue","title"])])}}});const je=X(oe,[["__scopeId","data-v-3679f217"]]);export{je as default};
