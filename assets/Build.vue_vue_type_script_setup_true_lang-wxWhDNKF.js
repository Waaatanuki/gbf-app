import{d as O,i as C,j as W,aj as z,l as T,a1 as q,r as A,o,c as n,b as c,F as w,p as H,n as E,w as a,t as u,h as g,a as l,e,v as m,g as V}from"./index-wO-3NrcT.js";import{E as G}from"./el-dialog-IaXNn_lk.js";import"./el-overlay-PQxyDaJ2.js";import{E as J,a as K}from"./el-form-item-BytOkecy.js";import{E as P}from"./el-row-1Gs3RL87.js";import{E as Q}from"./el-col-IXWPAyNe.js";import{E as X}from"./el-input-PGjWVdX4.js";import{E as Y}from"./el-upload-C1sEY_ro.js";import"./el-progress-qPneQqir.js";import{E as Z}from"./el-button-RfPAM4g7.js";import{h as ee}from"./html2canvas.esm-obiqNZW0.js";const te={"m-1":"",fc:"","flex-wrap":""},oe=["src"],ae={key:1},le=["src"],ie={key:1},re=["src"],ne={key:1},pe=["src"],se={key:1},de={"ml-18":""},xe=O({__name:"Build",setup(ce){const v=C(),$=C(),h=W({}),x=[{name:"result",label:"结算",cropWidth:250,cropHeight:500,imgData:""},{name:"team",label:"队伍",cropWidth:500,cropHeight:225,imgData:""},{name:"weapon",label:"武器盘",cropWidth:250,cropHeight:275,imgData:""},{name:"summon",label:"召唤",cropWidth:250,cropHeight:275,imgData:""}],U=W({dialog:{width:200,visible:!1,type:""},uploaderConfig:z("uploaderConfig_Build",x),formData:{}}),{uploaderConfig:t,dialog:r,formData:B}=T(U);function R(d,i){d.raw&&(h.url=URL.createObjectURL(d.raw),h.cropHeight=i.cropHeight,h.cropWidth=i.cropWidth,h.name=i.name,r.value.visible=!0,r.value.width=i.cropWidth+100,r.value.type="cropper")}function I(d,i){r.value.visible=!1,t.value.find(s=>s.name===i).imgData=d}function L(){r.value.visible=!0,r.value.width=300,r.value.type="edit"}function M(){v.value&&ee(v.value).then(d=>{const i=d.toDataURL("image/png"),s=document.createElement("a"),y=new MouseEvent("click");s.download="配置图",s.href=i,s.dispatchEvent(y)})}return q(()=>{t.value.forEach(d=>{d.imgData=""})}),(d,i)=>{const s=Z,y=Y,f=J,k=X,D=Q,N=P,j=K,F=A("ImgCropper"),S=G;return o(),n(w,null,[c("div",te,[(o(!0),n(w,null,H(e(t),(p,b)=>(o(),E(y,{key:b,ref_for:!0,ref_key:"uploadRef",ref:$,"m-1":"",accept:"image/*","auto-upload":!1,"show-file-list":!1,"on-change":_=>R(_,p)},{trigger:a(()=>[l(s,null,{default:a(()=>[g(u(p.label),1)]),_:2},1024)]),_:2},1032,["on-change"]))),128)),l(s,{"m-1":"",type:"primary",onClick:M},{default:a(()=>[g(" 生成 ")]),_:1}),l(s,{"m-1":"",type:"info",onClick:L},{default:a(()=>[g(" 自定义尺寸 ")]),_:1})]),c("div",{ref_key:"divEl",ref:v,style:m({width:`${e(t)[0].cropWidth+e(t)[1].cropWidth}px`,height:`${e(t)[0].cropHeight}px`}),"m-auto":"",flex:"","bg-slate":""},[c("div",{style:m({width:`${e(t)[0].cropWidth}px`,height:`${e(t)[0].cropHeight}px`}),fc:"","bg-slate-300":""},[e(t)[0].imgData?(o(),n("img",{key:0,src:e(t)[0].imgData},null,8,oe)):(o(),n("div",ae,u(e(t)[0].label),1))],4),c("div",{style:m({width:`${e(t)[1].cropWidth}px`,height:`${e(t)[0].cropHeight}px`}),"flex-col":""},[c("div",{style:m({width:`${e(t)[1].cropWidth}px`,height:`${e(t)[1].cropHeight}px`}),fc:"","bg-slate-400":""},[e(t)[1].imgData?(o(),n("img",{key:0,src:e(t)[1].imgData},null,8,le)):(o(),n("div",ie,u(e(t)[1].label),1))],4),c("div",{style:m({width:`${e(t)[1].cropWidth}px`,height:`${e(t)[2].cropHeight}px`}),fc:""},[c("div",{style:m({width:`${e(t)[2].cropWidth}px`,height:`${e(t)[2].cropHeight}px`}),fc:"","bg-slate-500":""},[e(t)[2].imgData?(o(),n("img",{key:0,src:e(t)[2].imgData},null,8,re)):(o(),n("div",ne,u(e(t)[2].label),1))],4),c("div",{style:m({width:`${e(t)[3].cropWidth}px`,height:`${e(t)[3].cropHeight}px`}),fc:"","bg-slate-600":""},[e(t)[3].imgData?(o(),n("img",{key:0,src:e(t)[3].imgData},null,8,pe)):(o(),n("div",se,u(e(t)[3].label),1))],4)],4)],4)],4),l(S,{modelValue:e(r).visible,"onUpdate:modelValue":i[1]||(i[1]=p=>e(r).visible=p),width:e(r).width,top:"5vh","destroy-on-close":""},{default:a(()=>[e(r).type==="edit"?(o(),E(j,{key:0,model:e(B),"label-width":"50px"},{default:a(()=>[(o(!0),n(w,null,H(e(t),(p,b)=>(o(),n("div",{key:b},[l(f,null,{default:a(()=>[c("span",de,u(p.label),1)]),_:2},1024),l(N,null,{default:a(()=>[l(D,{span:12},{default:a(()=>[l(f,{label:"宽"},{default:a(()=>[l(k,{modelValue:p.cropWidth,"onUpdate:modelValue":_=>p.cropWidth=_,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),l(D,{span:12},{default:a(()=>[l(f,{label:"高"},{default:a(()=>[l(k,{modelValue:p.cropHeight,"onUpdate:modelValue":_=>p.cropHeight=_,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)),l(f,null,{default:a(()=>[l(s,{type:"primary",onClick:i[0]||(i[0]=p=>t.value=x)},{default:a(()=>[g(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])):V("",!0),e(r).type==="cropper"?(o(),E(F,{key:1,"cropper-option":e(h),onCropperCb:I},null,8,["cropper-option"])):V("",!0)]),_:1},8,["modelValue","width"])],64)}}});export{xe as _};
