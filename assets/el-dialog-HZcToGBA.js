import{a2 as J,aq as Z,ar as _,as as U,d as R,K as G,M as O,s as $,o as k,c as N,b as A,Y as h,T as m,e,n as Q,a as I,w as b,W as x,k as z,V as ee,X as K,q as W,$ as j,at as oe,ab as se,L as te,g as q,S as ae,Z as le,au as ne,ad as re,a4 as ie,a8 as de,av as ce,an as ue}from"./index-ezc85PSj.js";import{d as me,a as fe,b as pe,c as ge,u as ve,E as be,e as he}from"./el-overlay-WEUJ315t.js";import{F as ye,E as Ce}from"./focus-trap-WyfVP5zn.js";import{c as Ee}from"./refs-2X8SjWuQ.js";import{u as V}from"./index-zh8lFjN-.js";const ke=(l,a,d)=>{let y={offsetX:0,offsetY:0};const n=s=>{const p=s.clientX,E=s.clientY,{offsetX:c,offsetY:g}=y,u=l.value.getBoundingClientRect(),t=u.left,v=u.top,L=u.width,S=u.height,F=document.documentElement.clientWidth,M=document.documentElement.clientHeight,B=-t+c,Y=-v+g,X=F-t-L+c,P=M-v-S+g,T=D=>{const o=Math.min(Math.max(c+D.clientX-p,B),X),i=Math.min(Math.max(g+D.clientY-E,Y),P);y={offsetX:o,offsetY:i},l.value&&(l.value.style.transform=`translate(${U(o)}, ${U(i)})`)},r=()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",r)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",r)},f=()=>{a.value&&l.value&&a.value.addEventListener("mousedown",n)},C=()=>{a.value&&l.value&&a.value.removeEventListener("mousedown",n)};J(()=>{Z(()=>{d.value?f():C()})}),_(()=>{C()})},H=Symbol("dialogInjectionKey"),we=["aria-level"],$e=["aria-label"],Le=["id"],Me=R({name:"ElDialogContent"}),Te=R({...Me,props:me,emits:fe,setup(l){const a=l,{t:d}=G(),{Close:y}=oe,{dialogRef:n,headerRef:f,bodyId:C,ns:s,style:p}=O(H),{focusTrapRef:E}=O(ye),c=$(()=>[s.b(),s.is("fullscreen",a.fullscreen),s.is("draggable",a.draggable),s.is("align-center",a.alignCenter),{[s.m("center")]:a.center},a.customClass]),g=Ee(E,n),u=$(()=>a.draggable);return ke(n,f,u),(t,v)=>(k(),N("div",{ref:e(g),class:m(e(c)),style:W(e(p)),tabindex:"-1"},[A("header",{ref_key:"headerRef",ref:f,class:m(e(s).e("header"))},[h(t.$slots,"header",{},()=>[A("span",{role:"heading","aria-level":t.ariaLevel,class:m(e(s).e("title"))},Q(t.title),11,we)]),t.showClose?(k(),N("button",{key:0,"aria-label":e(d)("el.dialog.close"),class:m(e(s).e("headerbtn")),type:"button",onClick:v[0]||(v[0]=L=>t.$emit("close"))},[I(e(ee),{class:m(e(s).e("close"))},{default:b(()=>[(k(),z(x(t.closeIcon||e(y))))]),_:1},8,["class"])],10,$e)):K("v-if",!0)],2),A("div",{id:e(C),class:m(e(s).e("body"))},[h(t.$slots,"default")],10,Le),t.$slots.footer?(k(),N("footer",{key:0,class:m(e(s).e("footer"))},[h(t.$slots,"footer")],2)):K("v-if",!0)],6))}});var De=j(Te,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const Ae=["aria-label","aria-labelledby","aria-describedby"],Ie=R({name:"ElDialog",inheritAttrs:!1}),Re=R({...Ie,props:pe,emits:ge,setup(l,{expose:a}){const d=l,y=se();V({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},$(()=>!!y.title)),V({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},$(()=>!!d.customClass));const n=te("dialog"),f=q(),C=q(),s=q(),{visible:p,titleId:E,bodyId:c,style:g,overlayDialogStyle:u,rendered:t,zIndex:v,afterEnter:L,afterLeave:S,beforeLeave:F,handleClose:M,onModalClick:B,onOpenAutoFocus:Y,onCloseAutoFocus:X,onCloseRequested:P,onFocusoutPrevented:T}=ve(d,f);ae(H,{dialogRef:f,headerRef:C,bodyId:c,ns:n,rendered:t,style:g});const r=he(B),D=$(()=>d.draggable&&!d.fullscreen);return a({visible:p,dialogContentRef:s}),(o,i)=>(k(),z(ce,{to:o.appendTo,disabled:o.appendTo!=="body"?!1:!o.appendToBody},[I(de,{name:"dialog-fade",onAfterEnter:e(L),onAfterLeave:e(S),onBeforeLeave:e(F),persisted:""},{default:b(()=>[ie(I(e(be),{"custom-mask-event":"",mask:o.modal,"overlay-class":o.modalClass,"z-index":e(v)},{default:b(()=>[A("div",{role:"dialog","aria-modal":"true","aria-label":o.title||void 0,"aria-labelledby":o.title?void 0:e(E),"aria-describedby":e(c),class:m(`${e(n).namespace.value}-overlay-dialog`),style:W(e(u)),onClick:i[0]||(i[0]=(...w)=>e(r).onClick&&e(r).onClick(...w)),onMousedown:i[1]||(i[1]=(...w)=>e(r).onMousedown&&e(r).onMousedown(...w)),onMouseup:i[2]||(i[2]=(...w)=>e(r).onMouseup&&e(r).onMouseup(...w))},[I(e(Ce),{loop:"",trapped:e(p),"focus-start-el":"container",onFocusAfterTrapped:e(Y),onFocusAfterReleased:e(X),onFocusoutPrevented:e(T),onReleaseRequested:e(P)},{default:b(()=>[e(t)?(k(),z(De,le({key:0,ref_key:"dialogContentRef",ref:s},o.$attrs,{"custom-class":o.customClass,center:o.center,"align-center":o.alignCenter,"close-icon":o.closeIcon,draggable:e(D),fullscreen:o.fullscreen,"show-close":o.showClose,title:o.title,"aria-level":o.headerAriaLevel,onClose:e(M)}),ne({header:b(()=>[o.$slots.title?h(o.$slots,"title",{key:1}):h(o.$slots,"header",{key:0,close:e(M),titleId:e(E),titleClass:e(n).e("title")})]),default:b(()=>[h(o.$slots,"default")]),_:2},[o.$slots.footer?{name:"footer",fn:b(()=>[h(o.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):K("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Ae)]),_:3},8,["mask","overlay-class","z-index"]),[[re,e(p)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}});var Se=j(Re,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Ne=ue(Se);export{Ne as E};
