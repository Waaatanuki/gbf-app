import{d as k,g as D,s as p,A as o,o as f,c as _,b as v,a as c,w as Y,F as C,l as w,e as u,aj as E}from"./index-bRI_KvZ7.js";import"./el-input-zZMxGNFP.js";/* empty css               */import{E as V,a as B}from"./el-select-Bsg_JOFM.js";import"./el-popper-UWs3eP6C.js";import{_ as g}from"./BarChart.vue_vue_type_script_setup_true_lang-Y-7pGTYr.js";import{_ as O}from"./DetailTable.vue_vue_type_script_setup_true_lang-LzzpFQT2.js";const S={fc:"","flex-col":""},$={"w-500px":"",fc:"","flex-col":""},L=k({__name:"Drawer",props:{id:{},data:{},tableData:{}},setup(y){const m=y,d=D("month"),j=[{label:"最近30天",value:"month"},{label:"最近半年",value:"halfYear"},{label:"最近一年",value:"year"},{label:"总体",value:"total"}];function i(t,e,a){return t.filter(r=>{const s=Object.values(r)[0];return e.isSame(o(s.timestamp),a)}).length}const b=p(()=>{const t=m.data,e={labels:[],count:[]};let a;const r=2022,s=o().year();switch(d.value){case"month":a=o().subtract(29,"day");for(let l=0;l<30;l++){const n=i(t,a,"day");e.labels.push(a.format("M-D")),e.count.push(n),a=o(a).add(1,"day")}break;case"halfYear":a=o().subtract(5,"month");for(let l=0;l<6;l++){const n=i(t,a,"month");e.labels.push(a.format("M")),e.count.push(n),a=o(a).add(1,"month")}break;case"year":a=o().subtract(11,"month");for(let l=0;l<12;l++){const n=i(t,a,"month");e.labels.push(a.format("M")),e.count.push(n),a=o(a).add(1,"month")}break;case"total":a=o().year(2022);for(let l=0;l<s-r+1;l++){const n=i(t,a,"year");e.labels.push(a.format("YYYY")),e.count.push(n),a=o(a).add(1,"year")}break}return e}),h=p(()=>{const t={labels:["1"],count:[0]};return m.data.forEach(e=>{const a=Object.values(e)[0];a.goldBrick==="11"?(t.count[t.count.length-1]++,t.labels.push(String(t.labels.length+1)),t.count.push(0)):a.blueChests&&t.count[t.count.length-1]++}),t});return(t,e)=>{const a=V,r=B;return f(),_("div",S,[v("div",null,[c(r,{modelValue:u(d),"onUpdate:modelValue":e[0]||(e[0]=s=>E(d)?d.value=s:null),size:"small"},{default:Y(()=>[(f(),_(C,null,w(j,(s,l)=>c(a,{key:l,label:s.label,value:s.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),v("div",$,[c(g,{id:`${t.id}count`,title:"次数统计",labels:u(b).labels,data:u(b).count},null,8,["id","labels","data"]),c(g,{id:`${t.id}blueChest`,title:"出金蓝箱次数统计",labels:u(h).labels,data:u(h).count},null,8,["id","labels","data"]),c(O,{data:t.tableData},null,8,["data"])])])}}});export{L as _};
