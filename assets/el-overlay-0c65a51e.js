import{aj as Z,aP as j,L as I,aZ as q,aE as F,aa as O,N as S,a1 as K,aG as Q,a_ as J,aD as X,aQ as h,D as w,G as k,d as R,a as ee,Y as M,aC as oe,ax as te,a$ as ne,b0 as ae,g as v,b1 as le,s as P,as as se,v as ue,a2 as ce,ai as ie,b2 as de,b3 as T}from"./index-136b82f0.js";import{P as x}from"./vnode-b3166d12.js";import{U as L}from"./event-9519ab40.js";import{c as D}from"./use-form-item-7bfefe8a.js";import{g as re}from"./scroll-b4c6884d.js";const fe=(e,o={})=>{Z(e)||j("[useLockscreen]","You need to pass a ref param to this function");const u=o.ns||I("popup"),t=q(()=>u.bm("parent","hidden"));if(!F||O(document.body,t.value))return;let c=0,s=!1,n="0";const d=()=>{setTimeout(()=>{X(document==null?void 0:document.body,t.value),s&&document&&(document.body.style.width=n)},200)};S(e,l=>{if(!l){d();return}s=!O(document.body,t.value),s&&(n=document.body.style.width),c=re(u.namespace.value);const f=document.documentElement.clientHeight<document.body.scrollHeight,r=K(document.body,"overflowY");c>0&&(f||r==="scroll")&&s&&(document.body.style.width=`calc(100% - ${c}px)`),Q(document.body,t.value)}),J(()=>d())},ye=e=>{if(!e)return{onClick:h,onMousedown:h,onMouseup:h};let o=!1,u=!1;return{onClick:n=>{o&&u&&e(n),o=u=!1},onMousedown:n=>{o=n.target===n.currentTarget},onMouseup:n=>{u=n.target===n.currentTarget}}},me=w({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:k([String,Array,Object])},zIndex:{type:k([String,Number])}}),ve={click:e=>e instanceof MouseEvent},pe="overlay";var Ce=R({name:"ElOverlay",props:me,emits:ve,setup(e,{slots:o,emit:u}){const t=I(pe),c=l=>{u("click",l)},{onClick:s,onMousedown:n,onMouseup:d}=ye(e.customMaskEvent?void 0:c);return()=>e.mask?ee("div",{class:[t.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:n,onMouseup:d},[M(o,"default")],x.STYLE|x.CLASS|x.PROPS,["onClick","onMouseup","onMousedown"]):oe("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[M(o,"default")])}});const we=Ce,be=w({center:Boolean,alignCenter:Boolean,closeIcon:{type:te},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Be={close:()=>!0},Ee=w({...be,appendToBody:Boolean,beforeClose:{type:k(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),Oe={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[L]:e=>ne(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Me=(e,o)=>{const t=ie().emit,{nextZIndex:c}=ae();let s="";const n=D(),d=D(),l=v(!1),f=v(!1),r=v(!1),p=v(e.zIndex||c());let y,m;const N=le("namespace",de),A=P(()=>{const a={},i=`--${N.value}-dialog`;return e.fullscreen||(e.top&&(a[`${i}-margin-top`]=e.top),e.width&&(a[`${i}-width`]=se(e.width))),a}),z=P(()=>e.alignCenter?{display:"flex"}:{});function $(){t("opened")}function V(){t("closed"),t(L,!1),e.destroyOnClose&&(r.value=!1)}function Y(){t("close")}function B(){m==null||m(),y==null||y(),e.openDelay&&e.openDelay>0?{stop:y}=T(()=>E(),e.openDelay):E()}function C(){y==null||y(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=T(()=>g(),e.closeDelay):g()}function b(){function a(i){i||(f.value=!0,l.value=!1)}e.beforeClose?e.beforeClose(a):C()}function H(){e.closeOnClickModal&&b()}function E(){F&&(l.value=!0)}function g(){l.value=!1}function _(){t("openAutoFocus")}function G(){t("closeAutoFocus")}function U(a){var i;((i=a.detail)==null?void 0:i.focusReason)==="pointer"&&a.preventDefault()}e.lockScroll&&fe(l);function W(){e.closeOnPressEscape&&b()}return S(()=>e.modelValue,a=>{a?(f.value=!1,B(),r.value=!0,p.value=e.zIndex?p.value++:c(),ue(()=>{t("open"),o.value&&(o.value.scrollTop=0)})):l.value&&C()}),S(()=>e.fullscreen,a=>{o.value&&(a?(s=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=s)}),ce(()=>{e.modelValue&&(l.value=!0,r.value=!0,B())}),{afterEnter:$,afterLeave:V,beforeLeave:Y,handleClose:b,onModalClick:H,close:C,doClose:g,onOpenAutoFocus:_,onCloseAutoFocus:G,onCloseRequested:W,onFocusoutPrevented:U,titleId:n,bodyId:d,closed:f,style:A,overlayDialogStyle:z,rendered:r,visible:l,zIndex:p}};export{we as E,Be as a,Ee as b,Oe as c,be as d,ye as e,Me as u};
