import{d as O,i as x,j as D,al as z,l as T,a2 as q,r as A,o as n,c as d,b,F as _,n as y,p as E,w as o,a as t,h,t as w,e as a,v as H,g as U}from"./index-Bd6qZyaF.js";import{E as G}from"./el-dialog-CWI513tU.js";import"./el-overlay-BuymCXNa.js";import{E as J,a as K}from"./el-form-item-2nr_OFyy.js";import{E as P}from"./el-row-1sHsw6jV.js";import{E as Q}from"./el-col-CrjrpTIb.js";import{E as X}from"./el-input-D5Wnjbmw.js";import{E as Y}from"./el-upload-D51zRa3F.js";import"./el-progress-DjnmXFiS.js";import{E as Z}from"./el-button-DMLUGhNR.js";import{h as ee}from"./html2canvas.esm-Chigv41t.js";const oe={"m-1":"",fc:"","flex-wrap":""},te=["src"],ae={key:1},le={"ml-18":""},ge=O({__name:"Material1",setup(re){const g=x(),W=x(),c=D({}),C=[{name:"weapon",label:"武器盘",cropWidth:250,cropHeight:270,imgData:""},{name:"summon",label:"召唤",cropWidth:250,cropHeight:85,imgData:""},{name:"subSummon",label:"sub召唤",cropWidth:250,cropHeight:65,imgData:""}],R=D({dialog:{width:200,visible:!1,type:""},uploaderConfig:z("uploaderConfig_Material1",C),formData:{}}),{uploaderConfig:p,dialog:r,formData:I}=T(R);function M(s,l){s.raw&&(c.url=URL.createObjectURL(s.raw),c.cropHeight=l.cropHeight,c.cropWidth=l.cropWidth,c.name=l.name,r.value.visible=!0,r.value.width=l.cropWidth+100,r.value.type="cropper")}function B(s,l){r.value.visible=!1,p.value.find(i=>i.name===l).imgData=s}function $(){r.value.visible=!0,r.value.width=300,r.value.type="edit"}function L(){g.value&&ee(g.value).then(s=>{const l=s.toDataURL("image/png"),i=document.createElement("a"),v=new MouseEvent("click");i.download="配置图",i.href=l,i.dispatchEvent(v)})}return q(()=>{p.value.forEach(s=>{s.imgData=""})}),(s,l)=>{const i=Z,v=Y,f=J,k=X,V=Q,N=P,S=K,F=A("ImgCropper"),j=G;return n(),d(_,null,[b("div",oe,[(n(!0),d(_,null,y(a(p),(e,u)=>(n(),E(v,{key:u,ref_for:!0,ref_key:"uploadRef",ref:W,"m-1":"",accept:"image/*","auto-upload":!1,"show-file-list":!1,"on-change":m=>M(m,e)},{trigger:o(()=>[t(i,null,{default:o(()=>[h(w(e.label),1)]),_:2},1024)]),_:2},1032,["on-change"]))),128)),t(i,{"m-1":"",type:"primary",onClick:L},{default:o(()=>[h(" 生成 ")]),_:1}),t(i,{"m-1":"",type:"info",onClick:$},{default:o(()=>[h(" 自定义尺寸 ")]),_:1})]),b("div",{ref_key:"divEl",ref:g,style:H({width:`${a(p)[0].cropWidth}px`,height:`${a(p)[0].cropHeight+a(p)[1].cropHeight+a(p)[2].cropHeight}px`}),"m-auto":"",flex:"","flex-col":"","bg-slate":""},[(n(!0),d(_,null,y(a(p),(e,u)=>(n(),d("div",{key:u,style:H({width:`${e.cropWidth}px`,height:`${e.cropHeight}px`}),fc:"","hover:bg-slate-600":""},[e.imgData?(n(),d("img",{key:0,src:e.imgData},null,8,te)):(n(),d("div",ae,w(e.label),1))],4))),128))],4),t(j,{modelValue:a(r).visible,"onUpdate:modelValue":l[1]||(l[1]=e=>a(r).visible=e),width:a(r).width,top:"5vh","destroy-on-close":""},{default:o(()=>[a(r).type==="edit"?(n(),E(S,{key:0,model:a(I),"label-width":"50px"},{default:o(()=>[(n(!0),d(_,null,y(a(p),(e,u)=>(n(),d("div",{key:u},[t(f,null,{default:o(()=>[b("span",le,w(e.label),1)]),_:2},1024),t(N,null,{default:o(()=>[t(V,{span:12},{default:o(()=>[t(f,{label:"宽"},{default:o(()=>[t(k,{modelValue:e.cropWidth,"onUpdate:modelValue":m=>e.cropWidth=m,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(V,{span:12},{default:o(()=>[t(f,{label:"高"},{default:o(()=>[t(k,{modelValue:e.cropHeight,"onUpdate:modelValue":m=>e.cropHeight=m,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)),t(f,null,{default:o(()=>[t(i,{type:"primary",onClick:l[0]||(l[0]=e=>p.value=C)},{default:o(()=>[h(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])):U("",!0),a(r).type==="cropper"?(n(),E(F,{key:1,"cropper-option":a(c),onCropperCb:B},null,8,["cropper-option"])):U("",!0)]),_:1},8,["modelValue","width"])],64)}}});export{ge as _};
