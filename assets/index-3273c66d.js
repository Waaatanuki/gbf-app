import{d as I,G as L,aj as R,o as z,a as r,c as s,a3 as l,w as p,f as u,Z as k,j as c,N as _,a4 as f,L as x,an as y,aE as $,a8 as j}from"./index-eec80e3a.js";import{E as B}from"./el-dialog-9cc0d4a1.js";import"./el-overlay-8f89e102.js";import{E as T}from"./el-button-5e4bc2ff.js";import{a as P,E as M}from"./el-table-column-784f74a0.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-7bf948a5.js";import"./el-tag-73ba1f92.js";import{l as F}from"./lodash-56211bc8.js";import{e as G,m as H}from"./evoker-1b0d3c03.js";import{d as Z}from"./file-fcde9183.js";import"./focus-trap-1b6df800.js";import"./aria-60e0cdc6.js";import"./refs-229b8cd2.js";import"./index-0b2fffe3.js";import"./vnode-739ceebd.js";import"./scroll-ecd9bd7f.js";import"./index-f8748455.js";import"./_initCloneObject-338777b6.js";const q={class:"app-container"},A={flex:""},K={"w-300px":""},Q=["src","onClick"],W=["src","onClick"],X=["onUpdate:modelValue"],Y={flex:""},ee={class:"item"},te=["src","onClick"],ae=["onUpdate:modelValue"],ne=I({__name:"index",setup(oe){const V=document.documentElement.offsetHeight-80,n=L({needItemList:[],tableData:[],dialog:{title:"",visible:!1},currentCell:[],targetRow:{},targetProp:""}),{tableData:w,dialog:d,needItemList:b,currentCell:C}=R(n);function E(a,e){d.value.visible=!0,n.targetRow=a,n.targetProp=e.property,n.currentCell=JSON.parse(a[e.property]),n.needItemList=[]}function h(a){n.needItemList.some(e=>e.id===a)||n.needItemList.push({id:a,count:0})}function N(){const a={};n.needItemList.forEach(e=>{a[e.id]=e.count}),n.currentCell.push(a),n.targetRow[n.targetProp]=JSON.stringify(n.currentCell,null,2),d.value.visible=!1}function O(){const a=F.cloneDeep(n.tableData);a.forEach(e=>{e.tarotUncap=JSON.parse(e.tarotUncapStr),e.evokerUncap=JSON.parse(e.evokerUncapStr),e.weaponUncap=JSON.parse(e.weaponUncapStr),e.domainUncap=JSON.parse(e.domainUncapStr),delete e.tarotUncapStr,delete e.evokerUncapStr,delete e.weaponUncapStr,delete e.domainUncapStr}),Z(JSON.stringify(a,null,2),"uncapData")}return z(()=>{n.tableData=G,n.tableData.forEach(a=>{a.tarotUncapStr=JSON.stringify(a.tarotUncap,null,2),a.evokerUncapStr=JSON.stringify(a.evokerUncap,null,2),a.weaponUncapStr=JSON.stringify(a.weaponUncap,null,2),a.domainUncapStr=JSON.stringify(a.domainUncap,null,2)})}),(a,e)=>{const m=M,U=$,D=P,g=T,J=B;return r(),s("div",q,[l(D,{data:u(w),"max-height":V,onCellDblclick:E},{default:p(()=>[l(m,{prop:"name",label:"阶段",align:"center",width:"100"}),l(m,{prop:"tarotUncapStr",label:"塔罗牌突破",align:"center"},{default:p(({row:t})=>[l(U,{modelValue:t.tarotUncapStr,"onUpdate:modelValue":o=>t.tarotUncapStr=o,type:"textarea",autosize:{maxRows:10}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(m,{prop:"evokerUncapStr",label:"贤者突破",align:"center"},{default:p(({row:t})=>[l(U,{modelValue:t.evokerUncapStr,"onUpdate:modelValue":o=>t.evokerUncapStr=o,type:"textarea",autosize:{maxRows:10}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(m,{prop:"weaponUncapStr",label:"武器突破",align:"center"},{default:p(({row:t})=>[l(U,{modelValue:t.weaponUncapStr,"onUpdate:modelValue":o=>t.weaponUncapStr=o,type:"textarea",autosize:{maxRows:10}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(m,{prop:"domainUncapStr",label:"领域突破",align:"center"},{default:p(({row:t})=>[l(U,{modelValue:t.domainUncapStr,"onUpdate:modelValue":o=>t.domainUncapStr=o,type:"textarea",autosize:{maxRows:10}},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"]),l(g,{class:"export-btn",type:"primary",onClick:O},{default:p(()=>[k(" 导出 ")]),_:1}),l(J,{modelValue:u(d).visible,"onUpdate:modelValue":e[1]||(e[1]=t=>u(d).visible=t),title:u(d).title,width:"800px",top:"5vh"},{footer:p(()=>[l(g,{type:"primary",onClick:N},{default:p(()=>[k(" 确认 ")]),_:1}),l(g,{onClick:e[0]||(e[0]=t=>u(d).visible=!1)},{default:p(()=>[k(" 取消 ")]),_:1})]),default:p(()=>[c("div",A,[c("div",K,[(r(!0),s(_,null,f(u(H),(t,o)=>(r(),s("div",{key:o,flex:""},[(r(!0),s(_,null,f(t,(i,v)=>(r(),s("div",{key:v,class:"item"},[c("img",{src:`https://prd-game-a-granbluefantasy.akamaized.net/assets/img/sp/assets/item/article/s/${i}.jpg`,onClick:S=>h(i)},null,8,Q)]))),128))]))),128))]),c("div",null,[(r(!0),s(_,null,f(u(C),(t,o)=>(r(),s("div",{key:o,flex:""},[(r(!0),s(_,null,f(Object.keys(t),(i,v)=>(r(),s("div",{key:v,class:"item"},[c("img",{src:`https://prd-game-a-granbluefantasy.akamaized.net/assets/img/sp/assets/item/article/s/${i}.jpg`,onClick:S=>h(i)},null,8,W),x(c("input",{"onUpdate:modelValue":S=>t[i]=S,"w-40px":""},null,8,X),[[y,t[i],void 0,{number:!0}]])]))),128))]))),128)),c("div",Y,[(r(!0),s(_,null,f(u(b),(t,o)=>(r(),s("div",{key:o},[c("div",ee,[c("img",{src:`https://prd-game-a-granbluefantasy.akamaized.net/assets/img/sp/assets/item/article/s/${t.id}.jpg`,onClick:i=>u(b).splice(o,1)},null,8,te),x(c("input",{"onUpdate:modelValue":i=>t.count=i,"w-40px":""},null,8,ae),[[y,t.count,void 0,{number:!0}]])])]))),128))])])])]),_:1},8,["modelValue","title"])])}}});const ye=j(ne,[["__scopeId","data-v-3679f217"]]);export{ye as default};
