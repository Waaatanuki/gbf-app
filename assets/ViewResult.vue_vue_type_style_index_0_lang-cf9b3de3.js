import{d as $,bd as B,s as F,as as I,o as t,l as z,w as n,b as a,c as l,F as g,k as b,a as r,e as k,aI as x,a8 as y,q as w,br as L,K as T,a6 as J,ac as M,E as O}from"./index-6a2b1576.js";import{E as R,a as D}from"./el-table-column-b6b5ad4d.js";import"./el-checkbox-2a898afe.js";import"./el-tooltip-4ed993c7.js";import{E as K}from"./el-popper-c359da55.js";import"./el-tag-3302509c.js";const W={fc:""},A={key:0,class:"absolute h-full w-full fc bg-black/40"},G=["src"],H=["src"],P={class:"w-44 fc flex-wrap"},Q=["src"],U={class:"w-44 fc flex-wrap"},X=["src"],Y={class:"waterfall"},Z={class:"relative fc flex-col select-none"},ee={key:0,class:"absolute h-full w-full bg-black/40"},te=["src"],se={class:"fc"},ae={key:0,class:"absolute z-10 h-full w-full bg-black/80"},le=["onClick"],ne={key:0,class:"absolute h-full w-full fc bg-black/40"},oe={class:"fc flex-col select-none"},ce=["src"],pe=$({__name:"ViewResult",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(V){const E=B(V,"modelValue"),S=F(()=>{const e=[];return E.value.forEach(_=>{var i;if((i=_.at(-1))!=null&&i.total){const d=_.at(-1).total;d==null||d.forEach(o=>{const f=e.find(p=>p.item_id===o.item_id);f?f.number+=o.number:e.push(JSON.parse(JSON.stringify(o)))})}}),e}),{height:j}=I();function q(e,_,i,d){if(i.kind!=="54"&&(i.done=!i.done),!_.article.find(o=>!o.done)){_.done=!0,d<e.length-1&&e.splice(d,1);let o=d;for(;o<e.length;){const f=e[o].article.find(p=>p.item_id===_.seq_id&&p.number===_.number);if(f){f.done=!0;break}o++}}}function m(e){if(!e)return"https://prd-game-a1-granbluefantasy.akamaized.net/assets/img/sp/job/bullet/empty.png";if(e.article)return`https://prd-game-a-granbluefantasy.akamaized.net/assets/img/sp/assets/bullet/s/${e.seq_id}.jpg`;if(e.kind==="10")return`https://prd-game-a-granbluefantasy.akamaized.net/assets/img/sp/assets/item/article/s/${e.item_id}.jpg`;if(e.kind==="17")return`https://prd-game-a-granbluefantasy.akamaized.net/assets/img/sp/assets/item/evolution/s/${e.item_id}.jpg`;if(e.kind==="54")return`https://prd-game-a-granbluefantasy.akamaized.net/assets/img/sp/assets/bullet/s/${e.item_id}.jpg`}return(e,_)=>{const i=J,d=K,o=R,f=D,p=M,N=O;return t(),z(N,null,{header:n(()=>[a("div",W,[(t(!0),l(g,null,b(E.value,(s,h)=>{var c;return t(),l("div",{key:h,relative:"",fc:""},[s.at(-1)&&((c=s.at(-1))!=null&&c.done)?(t(),l("div",A,[r(i,{size:45,color:"#409EFC"},{default:n(()=>[r(k(x))]),_:1})])):y("",!0),s.length===0?(t(),l("img",{key:1,class:"m-2 h-14 w-14",src:m(s.at(-1))},null,8,G)):(t(),z(d,{key:2,effect:"dark",placement:"bottom"},{content:n(()=>{var v;return[a("div",P,[(t(!0),l(g,null,b((v=s.at(-1))==null?void 0:v.total,(u,C)=>(t(),l("div",{key:C,class:"fc flex-col select-none"},[a("img",{class:"m-1 h-12 w-12",src:m(u)},null,8,Q),a("span",null,w(u.number),1)]))),128))])]}),default:n(()=>[a("img",{class:"m-2 h-14 w-14",src:m(s.at(-1))},null,8,H)]),_:2},1024))])}),128)),r(d,{effect:"dark",placement:"bottom"},{content:n(()=>[a("div",U,[(t(!0),l(g,null,b(k(S),(s,h)=>(t(),l("div",{key:h,class:"fc flex-col select-none"},[a("img",{class:"m-1 h-12 w-12",src:m(s)},null,8,X),a("span",null,w(s.number),1)]))),128))])]),default:n(()=>[r(i,{"ml-2":"","mt-9":""},{default:n(()=>[r(k(L))]),_:1})]),_:1})])]),default:n(()=>[r(p,{height:k(j)-315},{default:n(()=>[a("div",Y,[(t(!0),l(g,null,b(E.value.filter(s=>s.length!==0&&s[s.length-1].done!==!0),(s,h)=>(t(),l("div",{key:h,class:"water m-auto p-2"},[r(f,{data:s},{default:n(()=>[r(o,{prop:"seq_id",label:"目标",width:"80",align:"center"},{default:n(({row:c})=>[a("div",Z,[c.done?(t(),l("div",ee)):y("",!0),a("img",{class:"m-1 h-12 w-12",src:m(c)},null,8,te),a("span",null,w(c.number?c.number:"1"),1)])]),_:1}),r(o,{prop:"article",label:"材料",width:"260",align:"center"},{default:n(({row:c,$index:v})=>[a("div",se,[c.article.find(u=>u.kind==="54"&&u.done!==!0)?(t(),l("div",ae)):y("",!0),(t(!0),l(g,null,b(c.article,(u,C)=>(t(),l("div",{key:C,class:"relative cursor-pointer",onClick:T(re=>q(s,c,u,v),["prevent"])},[u.done?(t(),l("div",ne,[r(i,{size:45,color:"#409EFC"},{default:n(()=>[r(k(x))]),_:1})])):y("",!0),a("div",oe,[a("img",{class:"m-1 h-12 w-12",src:m(u)},null,8,ce),a("span",null,w(u.number),1)])],8,le))),128))])]),_:2},1024)]),_:2},1032,["data"])]))),128))])]),_:1},8,["height"])]),_:1})}}});export{pe as _};
