import{o as W,V as J,J as G,e as T,P as Q,I as j,f as $,g as k,h as N,j as I,G as h,n as m,k as e,t as Z,v as A,p as b,m as H,q as x,s as U,x as O,aH as ee,u as oe,r as z,H as se,D as te,R as ae,Q as ne,E as le,ab as re,ac as ie,C as de}from"./index-e1e4d07d.js";import{b as ce,c as ue,d as me,a as fe,u as pe,E as ge,e as ve}from"./el-overlay-375e2e02.js";import{a as q,E as be,_ as V}from"./base-d162ef96.js";import{C as he}from"./icon-4d217982.js";import{F as Ce,E as ye}from"./focus-trap-9c06f385.js";import{c as Ee}from"./refs-3f2ae67d.js";import{u as K}from"./index-927a9af8.js";const ke=(i,a,d)=>{let C={offsetX:0,offsetY:0};const n=s=>{const p=s.clientX,E=s.clientY,{offsetX:c,offsetY:g}=C,u=i.value.getBoundingClientRect(),t=u.left,v=u.top,D=u.width,F=u.height,S=document.documentElement.clientWidth,L=document.documentElement.clientHeight,B=-t+c,P=-v+g,Y=S-t-D+c,X=L-v-F+g,M=R=>{const o=Math.min(Math.max(c+R.clientX-p,B),Y),r=Math.min(Math.max(g+R.clientY-E,P),X);C={offsetX:o,offsetY:r},i.value.style.transform=`translate(${q(o)}, ${q(r)})`},l=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",l)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",l)},f=()=>{a.value&&i.value&&a.value.addEventListener("mousedown",n)},y=()=>{a.value&&i.value&&a.value.removeEventListener("mousedown",n)};W(()=>{J(()=>{d.value?f():y()})}),G(()=>{y()})},_=Symbol("dialogInjectionKey"),we=["aria-label"],$e=["id"],De=T({name:"ElDialogContent"}),Le=T({...De,props:ce,emits:ue,setup(i){const a=i,{t:d}=Q(),{Close:C}=he,{dialogRef:n,headerRef:f,bodyId:y,ns:s,style:p}=j(_),{focusTrapRef:E}=j(Ce),c=$(()=>[s.b(),s.is("fullscreen",a.fullscreen),s.is("draggable",a.draggable),s.is("align-center",a.alignCenter),{[s.m("center")]:a.center},a.customClass]),g=Ee(E,n),u=$(()=>a.draggable);return ke(n,f,u),(t,v)=>(k(),N("div",{ref:e(g),class:m(e(c)),style:O(e(p)),tabindex:"-1"},[I("header",{ref_key:"headerRef",ref:f,class:m(e(s).e("header"))},[h(t.$slots,"header",{},()=>[I("span",{role:"heading",class:m(e(s).e("title"))},Z(t.title),3)]),t.showClose?(k(),N("button",{key:0,"aria-label":e(d)("el.dialog.close"),class:m(e(s).e("headerbtn")),type:"button",onClick:v[0]||(v[0]=D=>t.$emit("close"))},[A(e(be),{class:m(e(s).e("close"))},{default:b(()=>[(k(),H(x(t.closeIcon||e(C))))]),_:1},8,["class"])],10,we)):U("v-if",!0)],2),I("div",{id:e(y),class:m(e(s).e("body"))},[h(t.$slots,"default")],10,$e),t.$slots.footer?(k(),N("footer",{key:0,class:m(e(s).e("footer"))},[h(t.$slots,"footer")],2)):U("v-if",!0)],6))}});var Me=V(Le,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const Re=["aria-label","aria-labelledby","aria-describedby"],Ie=T({name:"ElDialog",inheritAttrs:!1}),Ae=T({...Ie,props:me,emits:fe,setup(i,{expose:a}){const d=i,C=ee();K({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},$(()=>!!C.title)),K({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},$(()=>!!d.customClass));const n=oe("dialog"),f=z(),y=z(),s=z(),{visible:p,titleId:E,bodyId:c,style:g,overlayDialogStyle:u,rendered:t,zIndex:v,afterEnter:D,afterLeave:F,beforeLeave:S,handleClose:L,onModalClick:B,onOpenAutoFocus:P,onCloseAutoFocus:Y,onCloseRequested:X,onFocusoutPrevented:M}=pe(d,f);se(_,{dialogRef:f,headerRef:y,bodyId:c,ns:n,rendered:t,style:g});const l=ve(B),R=$(()=>d.draggable&&!d.fullscreen);return a({visible:p,dialogContentRef:s}),(o,r)=>(k(),H(ie,{to:"body",disabled:!o.appendToBody},[A(re,{name:"dialog-fade",onAfterEnter:e(D),onAfterLeave:e(F),onBeforeLeave:e(S),persisted:""},{default:b(()=>[te(A(e(ge),{"custom-mask-event":"",mask:o.modal,"overlay-class":o.modalClass,"z-index":e(v)},{default:b(()=>[I("div",{role:"dialog","aria-modal":"true","aria-label":o.title||void 0,"aria-labelledby":o.title?void 0:e(E),"aria-describedby":e(c),class:m(`${e(n).namespace.value}-overlay-dialog`),style:O(e(u)),onClick:r[0]||(r[0]=(...w)=>e(l).onClick&&e(l).onClick(...w)),onMousedown:r[1]||(r[1]=(...w)=>e(l).onMousedown&&e(l).onMousedown(...w)),onMouseup:r[2]||(r[2]=(...w)=>e(l).onMouseup&&e(l).onMouseup(...w))},[A(e(ye),{loop:"",trapped:e(p),"focus-start-el":"container",onFocusAfterTrapped:e(P),onFocusAfterReleased:e(Y),onFocusoutPrevented:e(M),onReleaseRequested:e(X)},{default:b(()=>[e(t)?(k(),H(Me,ae({key:0,ref_key:"dialogContentRef",ref:s},o.$attrs,{"custom-class":o.customClass,center:o.center,"align-center":o.alignCenter,"close-icon":o.closeIcon,draggable:e(R),fullscreen:o.fullscreen,"show-close":o.showClose,title:o.title,onClose:e(L)}),ne({header:b(()=>[o.$slots.title?h(o.$slots,"title",{key:1}):h(o.$slots,"header",{key:0,close:e(L),titleId:e(E),titleClass:e(n).e("title")})]),default:b(()=>[h(o.$slots,"default")]),_:2},[o.$slots.footer?{name:"footer",fn:b(()=>[h(o.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):U("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Re)]),_:3},8,["mask","overlay-class","z-index"]),[[le,e(p)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Te=V(Ae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const ze=de(Te);export{ze as E};
