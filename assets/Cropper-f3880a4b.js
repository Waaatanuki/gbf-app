import{d as I,g as _,h as v,t as R,r as V,o as i,c as a,b as l,F as b,k as B,e,a as h,w as g,j as y,n as s,q as d,l as U}from"./index-b7f00caa.js";import{E as L}from"./el-dialog-5b30bdc1.js";import"./el-overlay-ff97dc86.js";import{E as N}from"./el-progress-0764b41c.js";import{E as j}from"./el-button-2db28480.js";import{h as O}from"./html2canvas.esm-85f1a6b6.js";import"./focus-trap-8279f3e5.js";import"./aria-60e0cdc6.js";import"./use-form-item-cd777582.js";import"./refs-6e8695a1.js";import"./index-f3028c1b.js";import"./vnode-9c19c66d.js";import"./event-9519ab40.js";import"./scroll-7bcbd95e.js";import"./typescript-defaf979.js";import"./_baseClone-6c8c26a8.js";import"./_Uint8Array-284b2223.js";import"./_initCloneObject-4812da9f.js";import"./isEqual-b4a04587.js";const S={"m-2":"",fc:""},q=["src"],z={key:1},F=["src"],M={key:1},T=["src"],A={key:1},G=["src"],J={key:1},ge=I({__name:"Cropper",setup(K){const u=_(),w=_(),n=v({}),x=v({dialog:{width:"",visible:!1},uploaderInit:[{name:"result",label:"结算",cropWidth:200,cropHeight:400,imgData:""},{name:"team",label:"队伍",cropWidth:400,cropHeight:180,imgData:""},{name:"weapon",label:"武器盘",cropWidth:200,cropHeight:220,imgData:""},{name:"summon",label:"召唤",cropWidth:200,cropHeight:220,imgData:""}]}),{uploaderInit:t,dialog:c}=R(x);function k(p,o){p.raw&&(n.url=URL.createObjectURL(p.raw),n.cropHeight=o.cropHeight,n.cropWidth=o.cropWidth,n.name=o.name,c.value.visible=!0,c.value.width=o.cropWidth+100)}function D(p,o){c.value.visible=!1,t.value.find(r=>r.name===o).imgData=p}function W(){u.value&&O(u.value).then(p=>{const o=p.toDataURL("image/png"),r=document.createElement("a"),f=new MouseEvent("click");r.download="配置图",r.href=o,r.dispatchEvent(f)})}return(p,o)=>{const r=j,f=N,$=V("ImgCropper"),H=L;return i(),a(b,null,[l("div",S,[(i(!0),a(b,null,B(e(t),(m,E)=>(i(),U(f,{key:E,ref_for:!0,ref_key:"uploadRef",ref:w,"m-2":"",accept:"image/*","auto-upload":!1,"show-file-list":!1,"on-change":C=>k(C,m)},{trigger:g(()=>[h(r,null,{default:g(()=>[y(d(m.label),1)]),_:2},1024)]),_:2},1032,["on-change"]))),128)),h(r,{"m-2":"",type:"primary",onClick:W},{default:g(()=>[y(" 生成 ")]),_:1})]),l("div",{ref_key:"divEl",ref:u,style:s({width:`${e(t)[0].cropWidth+e(t)[1].cropWidth}px`,height:`${e(t)[0].cropHeight}px`}),flex:"","bg-slate":""},[l("div",{style:s({width:`${e(t)[0].cropWidth}px`,height:`${e(t)[0].cropHeight}px`}),fc:"","bg-slate-300":""},[e(t)[0].imgData?(i(),a("img",{key:0,src:e(t)[0].imgData},null,8,q)):(i(),a("div",z,d(e(t)[0].label),1))],4),l("div",{style:s({width:`${e(t)[1].cropWidth}px`,height:`${e(t)[0].cropHeight}px`}),"flex-col":""},[l("div",{style:s({width:`${e(t)[1].cropWidth}px`,height:`${e(t)[1].cropHeight}px`}),fc:"","bg-slate-400":""},[e(t)[1].imgData?(i(),a("img",{key:0,src:e(t)[1].imgData},null,8,F)):(i(),a("div",M,d(e(t)[1].label),1))],4),l("div",{style:s({width:`${e(t)[1].cropWidth}px`,height:`${e(t)[2].cropHeight}px`}),fc:""},[l("div",{style:s({width:`${e(t)[2].cropWidth}px`,height:`${e(t)[2].cropHeight}px`}),fc:"","bg-slate-500":""},[e(t)[2].imgData?(i(),a("img",{key:0,src:e(t)[2].imgData},null,8,T)):(i(),a("div",A,d(e(t)[2].label),1))],4),l("div",{style:s({width:`${e(t)[3].cropWidth}px`,height:`${e(t)[3].cropHeight}px`}),fc:"","bg-slate-600":""},[e(t)[3].imgData?(i(),a("img",{key:0,src:e(t)[3].imgData},null,8,G)):(i(),a("div",J,d(e(t)[3].label),1))],4)],4)],4)],4),h(H,{modelValue:e(c).visible,"onUpdate:modelValue":o[0]||(o[0]=m=>e(c).visible=m),width:e(c).width,top:"5vh","destroy-on-close":""},{default:g(()=>[h($,{"cropper-option":e(n),onCropperCb:D},null,8,["cropper-option"])]),_:1},8,["modelValue","width"])],64)}}});export{ge as default};
