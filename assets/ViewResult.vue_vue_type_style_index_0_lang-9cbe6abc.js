import{d as $,b6 as B,s as F,ao as I,o as t,l as z,w as n,b as a,c as l,F as g,k as b,a as i,e as k,aM as V,X as y,q as w,bu as L,U as M,V as T,a3 as J,E as O}from"./index-2f6a894d.js";import{E as R,a as D}from"./el-table-column-dac94c85.js";import"./el-checkbox-d262c4de.js";import"./el-tooltip-4ed993c7.js";import{E as U}from"./el-popper-3dccb834.js";/* empty css               */const W={fc:""},X={key:0,class:"absolute h-full w-full fc bg-black/40"},A=["src"],G=["src"],H={"w-55":"",fc:"","flex-wrap":"","gap-2":""},K=["src"],P={"w-55":"",fc:"","flex-wrap":"","gap-2":""},Q=["src"],Y={class:"waterfall"},Z={class:"relative fc flex-col select-none"},ee={key:0,class:"absolute h-full w-full bg-black/40"},te=["src"],se={class:"fc"},ae={key:0,class:"absolute z-10 h-full w-full bg-black/80"},le=["onClick"],ne={key:0,class:"absolute h-full w-full fc bg-black/40"},oe={class:"fc flex-col select-none"},ce=["src"],me=$({__name:"ViewResult",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(x){const E=B(x,"modelValue"),S=F(()=>{const e=[];return E.value.forEach(_=>{var r;if((r=_.at(-1))!=null&&r.total){const d=_.at(-1).total;d==null||d.forEach(o=>{const f=e.find(m=>m.item_id===o.item_id);f?f.number+=o.number:e.push(JSON.parse(JSON.stringify(o)))})}}),e}),{height:j}=I();function q(e,_,r,d){if(r.kind!=="54"&&(r.done=!r.done),!_.article.find(o=>!o.done)){_.done=!0,d<e.length-1&&e.splice(d,1);let o=d;for(;o<e.length;){const f=e[o].article.find(m=>m.item_id===_.seq_id&&m.number===_.number);if(f){f.done=!0;break}o++}}}function p(e){if(!e)return"https://prd-game-a1-granbluefantasy.akamaized.net/assets/img/sp/job/bullet/empty.png";if(e.article)return`https://prd-game-a-granbluefantasy.akamaized.net/assets/img/sp/assets/bullet/s/${e.seq_id}.jpg`;if(e.kind==="10")return`https://prd-game-a-granbluefantasy.akamaized.net/assets/img/sp/assets/item/article/s/${e.item_id}.jpg`;if(e.kind==="17")return`https://prd-game-a-granbluefantasy.akamaized.net/assets/img/sp/assets/item/evolution/s/${e.item_id}.jpg`;if(e.kind==="54")return`https://prd-game-a-granbluefantasy.akamaized.net/assets/img/sp/assets/bullet/s/${e.item_id}.jpg`}return(e,_)=>{const r=T,d=U,o=R,f=D,m=J,N=O;return t(),z(N,null,{header:n(()=>[a("div",W,[(t(!0),l(g,null,b(E.value,(s,h)=>{var c;return t(),l("div",{key:h,relative:"",fc:""},[s.at(-1)&&((c=s.at(-1))!=null&&c.done)?(t(),l("div",X,[i(r,{size:45,color:"#409EFC"},{default:n(()=>[i(k(V))]),_:1})])):y("",!0),s.length===0?(t(),l("img",{key:1,class:"m-2 h-14 w-14",src:p(s.at(-1))},null,8,A)):(t(),z(d,{key:2,effect:"dark",placement:"bottom"},{content:n(()=>{var v;return[a("div",H,[(t(!0),l(g,null,b((v=s.at(-1))==null?void 0:v.total,(u,C)=>(t(),l("div",{key:C,fc:"","flex-col":"","select-none":""},[a("img",{"h-12":"","w-12":"",src:p(u)},null,8,K),a("span",null,w(u.number),1)]))),128))])]}),default:n(()=>[a("img",{class:"m-2 h-14 w-14",src:p(s.at(-1))},null,8,G)]),_:2},1024))])}),128)),i(d,{effect:"dark",placement:"bottom"},{content:n(()=>[a("div",P,[(t(!0),l(g,null,b(k(S),(s,h)=>(t(),l("div",{key:h,fc:"","flex-col":"","select-none":""},[a("img",{"h-12":"","w-12":"",src:p(s)},null,8,Q),a("span",null,w(s.number),1)]))),128))])]),default:n(()=>[i(r,{"ml-2":"","mt-9":""},{default:n(()=>[i(k(L))]),_:1})]),_:1})])]),default:n(()=>[i(m,{height:k(j)-315},{default:n(()=>[a("div",Y,[(t(!0),l(g,null,b(E.value.filter(s=>s.length!==0&&s[s.length-1].done!==!0),(s,h)=>(t(),l("div",{key:h,class:"water m-auto p-2"},[i(f,{data:s},{default:n(()=>[i(o,{prop:"seq_id",label:"目标",width:"80",align:"center"},{default:n(({row:c})=>[a("div",Z,[c.done?(t(),l("div",ee)):y("",!0),a("img",{class:"m-1 h-12 w-12",src:p(c)},null,8,te),a("span",null,w(c.number?c.number:"1"),1)])]),_:1}),i(o,{prop:"article",label:"材料",width:"260",align:"center"},{default:n(({row:c,$index:v})=>[a("div",se,[c.article.find(u=>u.kind==="54"&&u.done!==!0)?(t(),l("div",ae)):y("",!0),(t(!0),l(g,null,b(c.article,(u,C)=>(t(),l("div",{key:C,class:"relative cursor-pointer",onClick:M(ie=>q(s,c,u,v),["prevent"])},[u.done?(t(),l("div",ne,[i(r,{size:45,color:"#409EFC"},{default:n(()=>[i(k(V))]),_:1})])):y("",!0),a("div",oe,[a("img",{class:"m-1 h-12 w-12",src:p(u)},null,8,ce),a("span",null,w(u.number),1)])],8,le))),128))])]),_:2},1024)]),_:2},1032,["data"])]))),128))])]),_:1},8,["height"])]),_:1})}}});export{me as _};
