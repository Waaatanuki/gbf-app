import"./base-d162ef96.js";import{E as R}from"./el-dialog-064e4ef9.js";import"./el-overlay-375e2e02.js";import{h as V,_ as B}from"./html2canvas.esm-26be8405.js";import{E as I}from"./el-progress-fce0f48f.js";import{E as U}from"./el-button-a3f7639e.js";import{e as L,r as f,Y as v,Z as N,g as i,h as a,j as p,T as b,W as j,k as t,v as h,p as g,x as s,t as m,m as O,X as y}from"./index-e1e4d07d.js";import"./icon-4d217982.js";import"./focus-trap-9c06f385.js";import"./aria-60e0cdc6.js";import"./constants-4db3609e.js";import"./refs-3f2ae67d.js";import"./index-927a9af8.js";import"./vnode-1be7d77b.js";import"./event-9519ab40.js";import"./scroll-49bb2d6e.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./typescript-defaf979.js";import"./use-form-item-77ae3ce7.js";import"./_baseClone-2e5d4ca7.js";import"./_Uint8Array-6184b0e9.js";import"./_initCloneObject-b176e66b.js";import"./isEqual-9aa6cdf6.js";import"./index-5725fa7a.js";import"./index-f8748455.js";const S={fc:"","m-2":""},T=["src"],z={key:1},M=["src"],X={key:1},Y=["src"],Z={key:1},q=["src"],A={key:1},yt=L({__name:"Cropper",setup(F){const u=f(),x=f(),n=v({}),w=v({dialog:{width:"",visible:!1},uploaderInit:[{name:"result",label:"结算",cropWidth:200,cropHeight:400,imgData:""},{name:"team",label:"队伍",cropWidth:400,cropHeight:180,imgData:""},{name:"weapon",label:"武器盘",cropWidth:200,cropHeight:220,imgData:""},{name:"summon",label:"召唤",cropWidth:200,cropHeight:220,imgData:""}]}),{uploaderInit:e,dialog:c}=N(w);function k(l,o){l.raw&&(n.url=URL.createObjectURL(l.raw),n.cropHeight=o.cropHeight,n.cropWidth=o.cropWidth,n.name=o.name,c.value.visible=!0,c.value.width=o.cropWidth+100)}function D(l,o){c.value.visible=!1,e.value.find(r=>r.name===o).imgData=l}function W(){u.value&&V(u.value).then(l=>{const o=l.toDataURL("image/png"),r=document.createElement("a"),_=new MouseEvent("click");r.download="配置图",r.href=o,r.dispatchEvent(_)})}return(l,o)=>{const r=U,_=I,$=B,H=R;return i(),a(b,null,[p("div",S,[(i(!0),a(b,null,j(t(e),(d,E)=>(i(),O(_,{key:E,ref_for:!0,ref_key:"uploadRef",ref:x,"m-2":"",accept:"image/*","auto-upload":!1,"show-file-list":!1,"on-change":C=>k(C,d)},{trigger:g(()=>[h(r,null,{default:g(()=>[y(m(d.label),1)]),_:2},1024)]),_:2},1032,["on-change"]))),128)),h(r,{"m-2":"",type:"primary",onClick:W},{default:g(()=>[y(" 生成 ")]),_:1})]),p("div",{ref_key:"divEl",ref:u,style:s({width:`${t(e)[0].cropWidth+t(e)[1].cropWidth}px`,height:`${t(e)[0].cropHeight}px`}),"bg-slate":"",flex:""},[p("div",{style:s({width:`${t(e)[0].cropWidth}px`,height:`${t(e)[0].cropHeight}px`}),"bg-slate-300":"",fc:""},[t(e)[0].imgData?(i(),a("img",{key:0,src:t(e)[0].imgData},null,8,T)):(i(),a("div",z,m(t(e)[0].label),1))],4),p("div",{style:s({width:`${t(e)[1].cropWidth}px`,height:`${t(e)[0].cropHeight}px`}),"flex-col":""},[p("div",{style:s({width:`${t(e)[1].cropWidth}px`,height:`${t(e)[1].cropHeight}px`}),"bg-slate-400":"",fc:""},[t(e)[1].imgData?(i(),a("img",{key:0,src:t(e)[1].imgData},null,8,M)):(i(),a("div",X,m(t(e)[1].label),1))],4),p("div",{style:s({width:`${t(e)[1].cropWidth}px`,height:`${t(e)[2].cropHeight}px`}),fc:""},[p("div",{style:s({width:`${t(e)[2].cropWidth}px`,height:`${t(e)[2].cropHeight}px`}),"bg-slate-500":"",fc:""},[t(e)[2].imgData?(i(),a("img",{key:0,src:t(e)[2].imgData},null,8,Y)):(i(),a("div",Z,m(t(e)[2].label),1))],4),p("div",{style:s({width:`${t(e)[3].cropWidth}px`,height:`${t(e)[3].cropHeight}px`}),"bg-slate-600":"",fc:""},[t(e)[3].imgData?(i(),a("img",{key:0,src:t(e)[3].imgData},null,8,q)):(i(),a("div",A,m(t(e)[3].label),1))],4)],4)],4)],4),h(H,{modelValue:t(c).visible,"onUpdate:modelValue":o[0]||(o[0]=d=>t(c).visible=d),width:t(c).width,top:"5vh","destroy-on-close":""},{default:g(()=>[h($,{"cropper-option":t(n),onCropperCb:D},null,8,["cropper-option"])]),_:1},8,["modelValue","width"])],64)}}});export{yt as default};
