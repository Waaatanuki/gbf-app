import"./base-d162ef96.js";import"./el-input-4552dc9d.js";import"./el-tag-51a09018.js";import{a as j,E as D}from"./el-select-9d5401d4.js";import"./el-scrollbar-528d0670.js";import"./el-popper-4c0fcaf7.js";import{d as o}from"./dayjs.min-34a2093e.js";import{_ as f}from"./BarChart.vue_vue_type_script_setup_true_lang-7caf26d5.js";import{_ as Y}from"./DetailTable.vue_vue_type_script_setup_true_lang-d8d69710.js";import{e as C,r as E,f as h,g as _,h as v,j as g,v as u,p as V,k as c,F as w,T as B,W as O}from"./index-e1e4d07d.js";const S={fc:"","flex-col":""},$={fc:"","flex-col":"","w-500px":""},W=C({__name:"Drawer",props:{id:{},data:{},tableData:{}},setup(y){const m=y,d=E("month"),k=[{label:"最近30天",value:"month"},{label:"最近半年",value:"halfYear"},{label:"最近一年",value:"year"},{label:"总体",value:"total"}];function i(a,e,t){return a.filter(r=>{const s=Object.values(r)[0];return e.isSame(o(s.timestamp),t)}).length}const p=h(()=>{const a=m.data,e={labels:[],count:[]};let t;const r=2022,s=o().year();switch(d.value){case"month":t=o().subtract(29,"day");for(let l=0;l<30;l++){const n=i(a,t,"day");e.labels.push(t.format("M-D")),e.count.push(n),t=o(t).add(1,"day")}break;case"halfYear":t=o().subtract(5,"month");for(let l=0;l<6;l++){const n=i(a,t,"month");e.labels.push(t.format("M")),e.count.push(n),t=o(t).add(1,"month")}break;case"year":t=o().subtract(11,"month");for(let l=0;l<12;l++){const n=i(a,t,"month");e.labels.push(t.format("M")),e.count.push(n),t=o(t).add(1,"month")}break;case"total":t=o().year(2022);for(let l=0;l<s-r+1;l++){const n=i(a,t,"year");e.labels.push(t.format("YYYY")),e.count.push(n),t=o(t).add(1,"year")}break}return e}),b=h(()=>{const a={labels:["1"],count:[0]};return m.data.forEach(e=>{const t=Object.values(e)[0];t.goldBrick==="11"?(a.count[a.count.length-1]++,a.labels.push(String(a.labels.length+1)),a.count.push(0)):t.blueChests&&a.count[a.count.length-1]++}),a});return(a,e)=>{const t=D,r=j;return _(),v("div",S,[g("div",null,[u(r,{modelValue:c(d),"onUpdate:modelValue":e[0]||(e[0]=s=>w(d)?d.value=s:null),size:"small"},{default:V(()=>[(_(),v(B,null,O(k,(s,l)=>u(t,{key:l,label:s.label,value:s.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),g("div",$,[u(f,{id:`${a.id}count`,title:"次数统计",labels:c(p).labels,data:c(p).count},null,8,["id","labels","data"]),u(f,{id:`${a.id}blueChest`,title:"出金蓝箱次数统计",labels:c(b).labels,data:c(b).count},null,8,["id","labels","data"]),u(Y,{"mt-10":"",data:a.tableData},null,8,["data"])])])}}});export{W as _};
