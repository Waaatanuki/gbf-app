import{d as D,i as Y,f as h,o as p,c as _,b as v,a as c,w as j,F as C,n as w,e as u,ak as B,B as o}from"./index-Diu-x6FV.js";import"./el-input-BRrpm-ok.js";/* empty css               */import{E,a as V}from"./el-select-DfUqHeI3.js";import"./el-popper-BWSs2B9i.js";import{_ as y}from"./BarChart.vue_vue_type_script_setup_true_lang-VQDnK9Yp.js";import{_ as O}from"./DetailTable.vue_vue_type_script_setup_true_lang-CXDuis3A.js";const S={fc:"","flex-col":""},$={"w-500px":"",fc:"","flex-col":""},R=D({__name:"Drawer",props:{id:{},data:{},tableData:{}},setup(g){const m=g,d=Y("month"),k=[{label:"最近30天",value:"month"},{label:"最近半年",value:"halfYear"},{label:"最近一年",value:"year"},{label:"总体",value:"total"}];function i(t,e,a){return t.filter(r=>{const n=Object.values(r)[0];return e.isSame(o(n.timestamp),a)}).length}const b=h(()=>{const t=m.data,e={labels:[],count:[]};let a;const r=2022,n=o().year();switch(d.value){case"month":a=o().subtract(29,"day");for(let l=0;l<30;l++){const s=i(t,a,"day");e.labels.push(a.format("M-D")),e.count.push(s),a=o(a).add(1,"day")}break;case"halfYear":a=o().subtract(5,"month");for(let l=0;l<6;l++){const s=i(t,a,"month");e.labels.push(a.format("M")),e.count.push(s),a=o(a).add(1,"month")}break;case"year":a=o().subtract(11,"month");for(let l=0;l<12;l++){const s=i(t,a,"month");e.labels.push(a.format("M")),e.count.push(s),a=o(a).add(1,"month")}break;case"total":a=o().year(2022);for(let l=0;l<n-r+1;l++){const s=i(t,a,"year");e.labels.push(a.format("YYYY")),e.count.push(s),a=o(a).add(1,"year")}break}return e}),f=h(()=>{const t={labels:["1"],count:[0]};return m.data.forEach(e=>{const a=Object.values(e)[0];a.goldBrick==="11"?(t.count[t.count.length-1]++,t.labels.push(String(t.labels.length+1)),t.count.push(0)):a.blueChests&&t.count[t.count.length-1]++}),t});return(t,e)=>{const a=E,r=V;return p(),_("div",S,[v("div",null,[c(r,{modelValue:u(d),"onUpdate:modelValue":e[0]||(e[0]=n=>B(d)?d.value=n:null),size:"small"},{default:j(()=>[(p(),_(C,null,w(k,(n,l)=>c(a,{key:l,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),v("div",$,[c(y,{id:`${t.id}count`,title:"次数统计",labels:u(b).labels,data:u(b).count},null,8,["id","labels","data"]),c(y,{id:`${t.id}blueChest`,title:"出金蓝箱次数统计",labels:u(f).labels,data:u(f).count},null,8,["id","labels","data"]),c(O,{data:t.tableData},null,8,["data"])])])}}});export{R as _};
